(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{387:function(e,n,t){"use strict";t.r(n);var s=t(4),a=Object(s.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"axios-æ˜¯å¦‚ä½•å°è£…-http-è¯·æ±‚çš„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#axios-æ˜¯å¦‚ä½•å°è£…-http-è¯·æ±‚çš„"}},[e._v("#")]),e._v(" axios æ˜¯å¦‚ä½•å°è£… HTTP è¯·æ±‚çš„")]),e._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/Wbcjp3Lh44nrInFc3IX85w",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://mp.weixin.qq.com/s/Wbcjp3Lh44nrInFc3IX85w"),n("OutboundLink")],1)])]),e._v(" "),n("p",[e._v("Axios æ¯‹åº¸å¤šè¯´å¤§å®¶åœ¨å‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ä¸ªå‘é€ HTTP è¯·æ±‚çš„åº“ï¼Œç”¨è¿‡çš„éƒ½çŸ¥é“ã€‚æœ¬æ–‡ç”¨æ¥æ•´ç†é¡¹ç›®ä¸­å¸¸ç”¨çš„ Axios çš„å°è£…ä½¿ç”¨ã€‚åŒæ—¶å­¦ä¹ æºç ï¼Œæ‰‹å†™å®ç° Axios çš„æ ¸å¿ƒä»£ç ã€‚")]),e._v(" "),n("h3",{attrs:{id:"axios-å¸¸ç”¨å°è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#axios-å¸¸ç”¨å°è£…"}},[e._v("#")]),e._v(" Axios å¸¸ç”¨å°è£…")]),e._v(" "),n("h4",{attrs:{id:"æ˜¯ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ˜¯ä»€ä¹ˆ"}},[e._v("#")]),e._v(" æ˜¯ä»€ä¹ˆ")]),e._v(" "),n("p",[e._v("Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚å®ƒçš„ç‰¹æ€§ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("ä»æµè§ˆå™¨ä¸­åˆ›å»º "),n("code",[e._v("XMLHttpRequests")])]),e._v(" "),n("li",[e._v("ä» node.js åˆ›å»º "),n("code",[e._v("http")]),e._v(" è¯·æ±‚")]),e._v(" "),n("li",[e._v("æ”¯æŒ "),n("code",[e._v("Promise")]),e._v(" API")]),e._v(" "),n("li",[e._v("æ‹¦æˆªè¯·æ±‚å’Œå“åº”")]),e._v(" "),n("li",[e._v("è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®")]),e._v(" "),n("li",[e._v("å–æ¶ˆè¯·æ±‚")]),e._v(" "),n("li",[e._v("è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®")]),e._v(" "),n("li",[e._v("å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRFå®˜ç½‘åœ°å€ï¼šhttp://www.axios-js.com/zh-cn/docs/#axios-config")])]),e._v(" "),n("p",[e._v("Axios ä½¿ç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨å…¨å±€çš„ Axios å¯¹è±¡ï¼›å¦å¤–ä¸€ç§æ˜¯é€šè¿‡ "),n("code",[e._v("axios.create(config)")]),e._v(" æ–¹æ³•åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä½¿ç”¨è¯¥å¯¹è±¡ã€‚ä¸¤ç§æ–¹å¼çš„åŒºåˆ«æ˜¯é€šè¿‡ç¬¬äºŒç§æ–¹å¼åˆ›å»ºçš„å®ä¾‹å¯¹è±¡æ›´æ¸…çˆ½ä¸€äº›ï¼›å…¨å±€çš„ Axios å¯¹è±¡å…¶å®ä¹Ÿæ˜¯åˆ›å»ºçš„å®ä¾‹å¯¹è±¡å¯¼å‡ºçš„ï¼Œå®ƒæœ¬èº«ä¸ŠåŠ è½½äº†å¾ˆå¤šé»˜è®¤å±æ€§ã€‚åé¢æºç å­¦ä¹ çš„æ—¶å€™ä¼šå†è¯¦ç»†è¯´æ˜ã€‚")]),e._v(" "),n("h4",{attrs:{id:"è¯·æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚"}},[e._v("#")]),e._v(" è¯·æ±‚")]),e._v(" "),n("p",[e._v("Axios è¿™ä¸ª HTTP çš„åº“æ¯”è¾ƒçµæ´»ï¼Œç»™ç”¨æˆ·å¤šç§å‘é€è¯·æ±‚çš„æ–¹å¼ï¼Œä»¥è‡³äºæœ‰äº›æ··ä¹±ã€‚ç»†å¿ƒæ•´ç†ä¼šå‘ç°ï¼Œå…¨å±€çš„ Axiosï¼ˆæˆ–è€… "),n("code",[e._v("axios.create(config)")]),e._v("åˆ›å»ºçš„å¯¹è±¡ï¼‰ æ—¢å¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// axios å½“ä½œå¯¹è±¡ä½¿ç”¨\naxios.request(config)\naxios.get(url[, config])\naxios.post(url[, data[, config]])\n// axios() å½“ä½œå‡½æ•°ä½¿ç”¨ã€‚ å‘é€ POST è¯·æ±‚\naxios({\n  method: 'post',\n  url: '/user/12345',\n  data: {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  }\n});\n")])])]),n("p",[e._v("åé¢æºç å­¦ä¹ çš„æ—¶å€™ä¼šå†è¯¦ç»†è¯´æ˜ä¸ºä»€ä¹ˆ Axios å¯ä»¥å®ç°ä¸¤ç§æ–¹å¼çš„ä½¿ç”¨ã€‚")]),e._v(" "),n("h4",{attrs:{id:"å–æ¶ˆè¯·æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å–æ¶ˆè¯·æ±‚"}},[e._v("#")]),e._v(" å–æ¶ˆè¯·æ±‚")]),e._v(" "),n("p",[e._v("å¯ä»¥ä½¿ç”¨ "),n("code",[e._v("CancelToken.source")]),e._v(" å·¥å‚æ–¹æ³•åˆ›å»º cancel tokenï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\n\naxios.get('/user/12345', {\n  cancelToken: source.token\n}).catch(function(thrown) {\n  if (axios.isCancel(thrown)) {\n    console.log('Request canceled', thrown.message);\n  } else {\n     // å¤„ç†é”™è¯¯\n  }\n});\n\n// å–æ¶ˆè¯·æ±‚ï¼ˆmessage å‚æ•°æ˜¯å¯é€‰çš„ï¼‰\nsource.cancel('Operation canceled by the user.');\n")])])]),n("p",[e._v("source æœ‰ä¸¤ä¸ªå±æ€§ï¼šä¸€ä¸ªæ˜¯ "),n("code",[e._v("source.token")]),e._v(" æ ‡è¯†è¯·æ±‚ï¼›å¦ä¸€ä¸ªæ˜¯ "),n("code",[e._v("source.cancel()")]),e._v(" æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è°ƒç”¨åï¼Œå¯ä»¥è®© CancelToken å®ä¾‹çš„ promise çŠ¶æ€å˜ä¸º "),n("code",[e._v("resolved")]),e._v("ï¼Œä»è€Œè§¦å‘ xhr å¯¹è±¡çš„ abort() æ–¹æ³•ï¼Œå–æ¶ˆè¯·æ±‚ã€‚")]),e._v(" "),n("h4",{attrs:{id:"æ‹¦æˆª"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‹¦æˆª"}},[e._v("#")]),e._v(" æ‹¦æˆª")]),e._v(" "),n("p",[e._v("Axios è¿˜æœ‰ä¸€ä¸ªå¥‡å¦™çš„åŠŸèƒ½ç‚¹ï¼Œå¯ä»¥åœ¨å‘é€è¯·æ±‚å‰å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œå¯¹ç›¸åº”ç»“æœè¿›è¡Œæ‹¦æˆªã€‚ç»“åˆä¸šåŠ¡åœºæ™¯çš„è¯ï¼Œåœ¨ä¸­å°ç³»ç»Ÿä¸­å®Œæˆç™»å½•åï¼Œè·å–åˆ°åç«¯è¿”å›çš„ tokenï¼Œå¯ä»¥å°† token æ·»åŠ åˆ° header ä¸­ï¼Œä»¥åæ‰€æœ‰çš„è¯·æ±‚è‡ªç„¶éƒ½ä¼šåŠ ä¸Šè¿™ä¸ªè‡ªå®šä¹‰ headerã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//æ‹¦æˆª1 è¯·æ±‚æ‹¦æˆª\ninstance.interceptors.request.use(function(config){\n    //åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ\n    const token = sessionStorage.getItem('token');\n    if(token){\n        const newConfig = {\n            ...config,\n            headers: {\n                token: token\n            }\n        }\n        return newConfig;\n    }else{\n        return config;\n    }\n}, function(error){\n    //å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ\n    return Promise.reject(error);\n});\n")])])]),n("p",[e._v("æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨è¯·æ±‚æ‹¦æˆªåŠŸèƒ½å®ç° "),n("strong",[e._v("å–æ¶ˆé‡å¤è¯·æ±‚")]),e._v("ï¼Œä¹Ÿå°±æ˜¯åœ¨å‰ä¸€ä¸ªè¯·æ±‚è¿˜æ²¡æœ‰è¿”å›ä¹‹å‰ï¼Œç”¨æˆ·é‡æ–°å‘é€äº†è¯·æ±‚ï¼Œéœ€è¦å…ˆå–æ¶ˆå‰ä¸€æ¬¡è¯·æ±‚ï¼Œå†å‘é€æ–°çš„è¯·æ±‚ã€‚æ¯”å¦‚æœç´¢æ¡†è‡ªåŠ¨æŸ¥è¯¢ï¼Œå½“ç”¨æˆ·ä¿®æ”¹äº†å†…å®¹é‡æ–°å‘é€è¯·æ±‚çš„æ—¶å€™éœ€è¦å–æ¶ˆå‰ä¸€æ¬¡è¯·æ±‚ï¼Œé¿å…è¯·æ±‚å’Œå“åº”æ··ä¹±ã€‚å†æ¯”å¦‚è¡¨å•æäº¤æŒ‰é’®ï¼Œç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å–æ¶ˆæ‰ä¹‹å‰çš„è¯·æ±‚ï¼Œä¿è¯åªæœ‰ä¸€æ¬¡è¯·æ±‚çš„å‘é€å’Œå“åº”ã€‚")]),e._v(" "),n("p",[e._v("å®ç°åŸç†æ˜¯ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡è®°å½•å·²ç»å‘å‡ºå»çš„è¯·æ±‚ï¼Œåœ¨è¯·æ±‚æ‹¦æˆªå‡½æ•°ä¸­å…ˆåˆ¤æ–­è¿™ä¸ªå¯¹è±¡ä¸­æ˜¯å¦è®°å½•äº†æœ¬æ¬¡è¯·æ±‚ä¿¡æ¯ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™å–æ¶ˆä¹‹å‰çš„è¯·æ±‚ï¼Œå°†æœ¬æ¬¡è¯·æ±‚æ·»åŠ è¿›å»å¯¹è±¡ä¸­ï¼›å¦‚æœæ²¡æœ‰è®°å½•è¿‡æœ¬æ¬¡è¯·æ±‚ï¼Œåˆ™å°†æœ¬æ¬¡è¯·æ±‚ä¿¡æ¯æ·»åŠ è¿›å¯¹è±¡ä¸­ã€‚æœ€åè¯·æ±‚å®Œæˆåï¼Œåœ¨å“åº”æ‹¦æˆªå‡½æ•°ä¸­æ‰§è¡Œåˆ é™¤æœ¬æ¬¡è¯·æ±‚ä¿¡æ¯çš„é€»è¾‘ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// æ‹¦æˆª2   é‡å¤è¯·æ±‚ï¼Œå–æ¶ˆå‰ä¸€ä¸ªè¯·æ±‚\nconst promiseArr = {};\ninstance.interceptors.request.use(function(config){\n    console.log(Object.keys(promiseArr).length)\n    //åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ\n    let source=null;\n    if(config.cancelToken){\n        // config é…ç½®ä¸­å¸¦äº† source ä¿¡æ¯\n        source = config.source;\n    }else{\n        const CancelToken = axios.CancelToken;\n        source = CancelToken.source();\n        config.cancelToken = source.token;\n    }\n    const currentKey = getRequestSymbol(config);\n    if(promiseArr[currentKey]){\n        const tmp = promiseArr[currentKey];\n        tmp.cancel("å–æ¶ˆå‰ä¸€ä¸ªè¯·æ±‚");\n        delete promiseArr[currentKey];\n        promiseArr[currentKey] = source;\n    }else{\n        promiseArr[currentKey] = source;\n    }\n    return config;\n\n}, function(error){\n    //å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ\n    return Promise.reject(error);\n});\n// æ ¹æ® urlã€methodã€params ç”Ÿæˆå”¯ä¸€æ ‡è¯†ï¼Œå¤§å®¶å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ç”Ÿæˆè§„åˆ™\nfunction getRequestSymbol(config){\n    const arr = [];\n    if(config.params){\n        const data = config.params;\n        for(let key of Object.keys(data)){\n            arr.push(key+"&"+data[key]);\n        }\n        arr.sort();\n    }\n    return config.url+config.method+arr.join("");\n}\n\ninstance.interceptors.response.use(function(response){\n    const currentKey = getRequestSymbol(response.config);\n    delete promiseArr[currentKey];\n    return response;\n}, function(error){\n    //å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ\n    return Promise.reject(error);\n});\n')])])]),n("p",[e._v("æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå‡½æ•°ä¸­ç»Ÿä¸€å¤„ç†è¿”å›ç çš„é€»è¾‘ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// å“åº”æ‹¦æˆª\ninstance.interceptors.response.use(function(response){\n    // 401 æ²¡æœ‰ç™»å½•è·³è½¬åˆ°ç™»å½•é¡µé¢\n    if(response.data.code===401){\n        window.location.href = "http://127.0.0.1:8080/#/login";\n    }else if(response.data.code===403){\n        // 403 æ— æƒé™è·³è½¬åˆ°æ— æƒé™é¡µé¢\n        window.location.href = "http://127.0.0.1:8080/#/noAuth";\n    }\n    return response;\n}, function(error){\n    //å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ\n    return Promise.reject(error);\n})\n')])])]),n("h4",{attrs:{id:"æ–‡ä»¶ä¸‹è½½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡ä»¶ä¸‹è½½"}},[e._v("#")]),e._v(" æ–‡ä»¶ä¸‹è½½")]),e._v(" "),n("p",[e._v("é€šå¸¸æ–‡ä»¶ä¸‹è½½æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯é€šè¿‡æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„å¯¹å¤–åœ°å€ç›´æ¥ä¸‹è½½ï¼›è¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡æ¥å£å°†æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼ä¸‹è½½ã€‚")]),e._v(" "),n("p",[e._v("ç¬¬ä¸€ç§ï¼š"),n("strong",[e._v("åŒåŸŸå")]),e._v(" ä¸‹ä½¿ç”¨ "),n("code",[e._v("a")]),e._v(" æ ‡ç­¾ä¸‹è½½ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// httpServer.js\nconst express = require("express");\nconst path = require(\'path\');\nconst app = express();\n\n//é™æ€æ–‡ä»¶åœ°å€\napp.use(express.static(path.join(__dirname, \'public\')))\napp.use(express.static(path.join(__dirname, \'../\')));\napp.listen(8081, () => {\n  console.log("æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼")\n});\n// index.html\n<a href="test.txt" download="test.txt">ä¸‹è½½</a>\n')])])]),n("p",[n("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}})]),e._v(" "),n("p",[e._v("ç¬¬äºŒç§ï¼šäºŒè¿›åˆ¶æ–‡ä»¶æµçš„å½¢å¼ä¼ é€’ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®è¯¥æ¥å£å¹¶ä¸èƒ½ä¸‹è½½æ–‡ä»¶ï¼Œä¸€å®šç¨‹åº¦ä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚æ¯”è¾ƒå¤šçš„åœºæ™¯æ˜¯ï¼šåç«¯æ¥æ”¶åˆ°æŸ¥è¯¢å‚æ•°ï¼ŒæŸ¥è¯¢æ•°æ®åº“ç„¶åé€šè¿‡æ’ä»¶åŠ¨æ€ç”Ÿæˆ excel æ–‡ä»¶ï¼Œä»¥æ–‡ä»¶æµçš„æ–¹å¼è®©å‰ç«¯ä¸‹è½½ã€‚")]),e._v(" "),n("p",[e._v("è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚æ–‡ä»¶ä¸‹è½½çš„é€»è¾‘è¿›è¡Œå°è£…ã€‚å°†äºŒè¿›åˆ¶æ–‡ä»¶æµå­˜åœ¨ "),n("code",[e._v("Blob")]),e._v(" å¯¹è±¡ä¸­ï¼Œå†å°†å…¶è½¬ä¸º url å¯¹è±¡ï¼Œæœ€åé€šè¿‡ a æ ‡ç­¾ä¸‹è½½ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//å°è£…ä¸‹è½½\nexport function downLoadFetch(url, params = {}, config={}) {\n    //å–æ¶ˆ\n    const downSource = axios.CancelToken.source();\n    document.getElementById('downAnimate').style.display = 'block';\n    document.getElementById('cancelBtn').addEventListener('click', function(){\n        downSource.cancel(\"ç”¨æˆ·å–æ¶ˆä¸‹è½½\");\n        document.getElementById('downAnimate').style.display = 'none';\n    }, false);\n    //å‚æ•°\n    config.params = params;\n    //è¶…æ—¶æ—¶é—´\n    config.timeout = config.timeout ? config.timeout : defaultDownConfig.timeout;\n    //ç±»å‹\n    config.responseType = defaultDownConfig.responseType;\n    //å–æ¶ˆä¸‹è½½\n    config.cancelToken = downSource.token;\n    return instance.get(url, config).then(response=>{\n        const content = response.data;\n        const url = window.URL.createObjectURL(new Blob([content]));\n        //åˆ›å»º a æ ‡ç­¾\n        const link = document.createElement('a');\n        link.style.display = 'none';\n        link.href = url;\n        //æ–‡ä»¶å  Content-Disposition: attachment; filename=download.txt\n        const filename = response.headers['content-disposition'].split(\";\")[1].split(\"=\")[1];\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        return {\n            status: 200,\n            success: true\n        }\n    })\n}\n")])])]),n("p",[n("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}})]),e._v(" "),n("p",[e._v("https://juejin.cn/post/6878912072780873742")]),e._v(" "),n("h3",{attrs:{id:"æ‰‹å†™-axios-æ ¸å¿ƒä»£ç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‰‹å†™-axios-æ ¸å¿ƒä»£ç "}},[e._v("#")]),e._v(" æ‰‹å†™ Axios æ ¸å¿ƒä»£ç ")]),e._v(" "),n("p",[e._v("å†™äº†è¿™ä¹ˆå¤šç”¨æ³•ç»ˆäºåˆ°æ­£é¢˜äº†ï¼Œæ‰‹å†™ Axios æ ¸å¿ƒä»£ç ã€‚Axios è¿™ä¸ªåº“æºç ä¸éš¾é˜…è¯»ï¼Œæ²¡æœ‰ç‰¹åˆ«å¤æ‚çš„é€»è¾‘ï¼Œå¤§å®¶å¯ä»¥æ”¾å¿ƒé˜…è¯» ğŸ˜‚ ã€‚")]),e._v(" "),n("p",[e._v("æºç å…¥å£æ˜¯è¿™æ ·æŸ¥æ‰¾ï¼šåœ¨é¡¹ç›® "),n("code",[e._v("node_modules")]),e._v(" ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° "),n("code",[e._v("axios")]),e._v(" æ¨¡å—çš„ "),n("code",[e._v("package.json")]),e._v(" æ–‡ä»¶ï¼Œå…¶ä¸­ "),n("code",[e._v('"main": "index.js",')]),e._v(" å°±æ˜¯æ–‡ä»¶å…¥å£ã€‚ä¸€æ­¥æ­¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æºç æ˜¯æ€ä¹ˆä¸²èµ·æ¥çš„ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}})]),e._v(" "),n("p",[e._v("æ¨¡ä»¿ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œæˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„ç›®å½•ç»“æ„ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("axios-js\nâ”‚  index.html\nâ”‚  \nâ””â”€lib\n        adapter.js\n        Axios.js\n        axiosInstance.js\n        CancelToken.js\n        InterceptorManager.js\n")])])]),n("h4",{attrs:{id:"axios-æ˜¯ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#axios-æ˜¯ä»€ä¹ˆ"}},[e._v("#")]),e._v(" Axios æ˜¯ä»€ä¹ˆ")]),e._v(" "),n("p",[e._v("ä¸Šé¢æœ‰æåˆ°æˆ‘ä»¬ä½¿ç”¨çš„å…¨å±€ Axios å¯¹è±¡å…¶å®ä¹Ÿæ˜¯æ„é€ å‡ºæ¥çš„ axiosï¼Œæ—¢å¯ä»¥å½“å¯¹è±¡ä½¿ç”¨è°ƒç”¨ getã€post ç­‰æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å½“ä½œå‡½æ•°ä½¿ç”¨ã€‚è¿™æ˜¯å› ä¸ºå…¨å±€çš„ Axios å…¶å®æ˜¯å‡½æ•°å¯¹è±¡ "),n("code",[e._v("instance")]),e._v(" ã€‚æºç ä½ç½®åœ¨ axios/lib/axios.js ä¸­ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// axios/lib/axios.js\n//åˆ›å»º axios å®ä¾‹\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  //instance å¯¹è±¡æ˜¯ bind è¿”å›çš„å‡½æ•°\n  var instance = bind(Axios.prototype.request, context);\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n  // Copy context to instance\n  utils.extend(instance, context);\n  return instance;\n}\n\n// å®ä¾‹ä¸€ä¸ª axios\nvar axios = createInstance(defaults);\n\n// å‘è¿™ä¸ªå®ä¾‹æ·»åŠ  Axios å±æ€§\naxios.Axios = Axios;\n\n// å‘è¿™ä¸ªå®ä¾‹æ·»åŠ  create æ–¹æ³•\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n// å‘è¿™ä¸ªå®ä¾‹æ·»åŠ  CancelToken æ–¹æ³•\naxios.CancelToken = require('./cancel/CancelToken');\n// å¯¼å‡ºå®ä¾‹ axios\nmodule.exports.default = axios;\n")])])]),n("p",[e._v("æ ¹æ®ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å†™ä¸€ä¸‹è‡ªå·±å®ç° Axios.js å’Œ axiosInstance.jsï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// Axios.js\n//Axios ä¸»ä½“\nfunction Axios(config){\n}\n\n// æ ¸å¿ƒæ–¹æ³•ï¼Œå‘é€è¯·æ±‚\nAxios.prototype.request = function(config){\n}\n\nAxios.prototype.get = function(url, config={}){\n    return this.request({url: url, method: 'GET', ...config});\n}\n\nAxios.prototype.post = function(url, data, config={}){\n    return this.request({url: url, method: 'POST', data: data, ...config})\n}\nexport default Axios;\n")])])]),n("p",[e._v("åœ¨ axiosInstance.js æ–‡ä»¶ä¸­ï¼Œå®ä¾‹åŒ–ä¸€ä¸ª Axios å¾—åˆ° contextï¼Œå†å°†åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•ç»‘å®šåˆ° instance å¯¹è±¡ä¸Šï¼ŒåŒæ—¶å°† context çš„å±æ€§æ·»åŠ åˆ° instance ä¸Šã€‚è¿™æ · instance å°±æˆä¸ºäº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡ã€‚æ—¢å¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// axiosInstance.js\n//åˆ›å»ºå®ä¾‹\nfunction createInstance(config){\n    const context = new Axios(config);\n    var instance = Axios.prototype.request.bind(context);\n    //å°† Axios.prototype å±æ€§æ‰©å±•åˆ° instance ä¸Š\n    for(let k of Object.keys(Axios.prototype)){\n        instance[k] = Axios.prototype[k].bind(context);\n    }\n    //å°† context å±æ€§æ‰©å±•åˆ° instance ä¸Š\n    for(let k of Object.keys(context)){\n        instance[k] = context[k]\n    }\n    return instance;\n}\n\nconst axios = createInstance({});\naxios.create = function(config){\n    return createInstance(config);\n}\nexport default axios;\n")])])]),n("p",[e._v("ä¹Ÿå°±æ˜¯è¯´ axios.js ä¸­å¯¼å‡ºçš„ axios å¯¹è±¡å¹¶ä¸æ˜¯ "),n("code",[e._v("new Axios()")]),e._v(" æ–¹æ³•è¿”å›çš„å¯¹è±¡ contextï¼Œè€Œæ˜¯ "),n("code",[e._v("Axios.prototype.request.bind(context)")]),e._v(" æ‰§è¡Œè¿”å›çš„ "),n("code",[e._v("instance")]),e._v("ï¼Œé€šè¿‡éå† "),n("code",[e._v("Axios.prototype")]),e._v(" å¹¶æ”¹å˜å…¶ this æŒ‡å‘åˆ° contextï¼›éå† context å¯¹è±¡è®© instance å¯¹è±¡å…·æœ‰ context çš„æ‰€æœ‰å±æ€§ã€‚è¿™æ · instance å¯¹è±¡å°±æ— æ•Œäº†ï¼ŒğŸ˜ æ—¢æ‹¥æœ‰äº† "),n("code",[e._v("Axios.prototype")]),e._v(" ä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼Œåˆå…·æœ‰äº† context çš„æ‰€æœ‰å±æ€§ã€‚")]),e._v(" "),n("h4",{attrs:{id:"è¯·æ±‚å®ç°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚å®ç°"}},[e._v("#")]),e._v(" è¯·æ±‚å®ç°")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬çŸ¥é“ Axios åœ¨æµè§ˆå™¨ä¸­ä¼šåˆ›å»º XMLHttpRequest å¯¹è±¡ï¼Œåœ¨ node.js ç¯å¢ƒä¸­åˆ›å»º http å‘é€è¯·æ±‚ã€‚"),n("code",[e._v("Axios.prototype.request()")]),e._v(" æ˜¯å‘é€è¯·æ±‚çš„æ ¸å¿ƒæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®è°ƒç”¨çš„æ˜¯ "),n("code",[e._v("dispatchRequest")]),e._v(" æ–¹æ³•ï¼Œè€Œ "),n("code",[e._v("dispatchRequest")]),e._v(" æ–¹æ³•è°ƒç”¨çš„æ˜¯ "),n("code",[e._v("config.adapter || defaults.adapter")]),e._v(" ä¹Ÿå°±æ˜¯è‡ªå®šä¹‰çš„ adapter æˆ–è€…é»˜è®¤çš„ "),n("code",[e._v("defaults.adapter")]),e._v("ï¼Œé»˜è®¤"),n("code",[e._v("defaults.adapter")]),e._v(" è°ƒç”¨çš„æ˜¯ getDefaultAdapter æ–¹æ³•ï¼Œæºç ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n")])])]),n("p",[e._v("å“ˆå“ˆå“ˆï¼ŒgetDefaultAdapter æ–¹æ³•æœ€ç»ˆæ ¹æ®å½“å‰çš„ç¯å¢ƒè¿”å›ä¸åŒçš„å®ç°æ–¹æ³•ï¼Œè¿™é‡Œç”¨åˆ°äº† "),n("strong",[e._v("é€‚é…å™¨æ¨¡å¼")]),e._v("ã€‚æˆ‘ä»¬åªç”¨å®ç° xhr å‘é€è¯·æ±‚å³å¯ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//é€‚é…å™¨ adapter.js\nfunction getDefaultAdapter(){\n    var adapter;\n    if(typeof XMLHttpRequest !== 'undefined'){\n        //å¯¼å…¥ XHR å¯¹è±¡è¯·æ±‚\n        adapter = (config)=>{\n            return xhrAdapter(config);\n        }\n    }\n    return adapter;\n}\nfunction xhrAdapter(config){\n    return new Promise((resolve, reject)=>{\n        var xhr = new XMLHttpRequest();\n        xhr.open(config.method, config.url, true);\n        xhr.send();\n        xhr.onreadystatechange = ()=>{\n            if(xhr.readyState===4){\n                if(xhr.status>=200&&xhr.status<300){\n                    resolve({\n                        data: {},\n                        status: xhr.status,\n                        statusText: xhr.statusText,\n                        xhr: xhr\n                    })\n                }else{\n                    reject({\n                        status: xhr.status\n                    })\n                }\n            }\n        };\n    })\n}\nexport default getDefaultAdapter;\n")])])]),n("p",[e._v("è¿™æ ·å°±ç†é¡ºäº†ï¼ŒgetDefaultAdapter æ–¹æ³•æ¯æ¬¡æ‰§è¡Œä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè¿™æ · Axios.prototype.request æ–¹æ³•å¯ä»¥å¾—åˆ°æ‰§è¡Œ xhr å‘é€è¯·æ±‚çš„ Promise å¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("ç»™æˆ‘ä»¬çš„ Axios.js æ·»åŠ å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Axios.js\nimport getDefaultAdapter from './adapter.js';\nAxios.prototype.request = function(config){\n    const adapter = getDefaultAdapter(config);\n    var promise = Promise.resolve(config);\n    var chain = [adapter, undefined];\n    while(chain.length){\n        promise = promise.then(chain.shift(), chain.shift());\n    }\n    return promise;\n}\n")])])]),n("h4",{attrs:{id:"æ‹¦æˆªå™¨å®ç°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‹¦æˆªå™¨å®ç°"}},[e._v("#")]),e._v(" æ‹¦æˆªå™¨å®ç°")]),e._v(" "),n("p",[e._v("æ‹¦æˆªå™¨çš„åŸç†åœ¨äº "),n("code",[e._v("Axios.prototype.request")]),e._v(" æ–¹æ³•ä¸­çš„ "),n("code",[e._v("chain")]),e._v(" æ•°ç»„ï¼ŒæŠŠè¯·æ±‚æ‹¦æˆªå‡½æ•°æ·»åŠ åˆ° "),n("code",[e._v("chain")]),e._v(" æ•°ç»„å‰é¢ï¼ŒæŠŠå“åº”æ‹¦æˆªå‡½æ•°æ·»åŠ åˆ°æ•°ç»„åé¢ã€‚è¿™æ ·å°±å¯ä»¥å®ç°å‘é€å‰æ‹¦æˆªå’Œå“åº”åæ‹¦æˆªçš„æ•ˆæœã€‚"),n("img",{attrs:{src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",alt:"å›¾ç‰‡"}}),e._v("åˆ›å»º InterceptorManager.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//InterceptorManager.js \n//æ‹¦æˆªå™¨\nfunction InterceptorManager(){\n    this.handlers = [];\n}\nInterceptorManager.prototype.use = function(fulfilled, rejected){\n    this.handlers.push({\n        fulfilled: fulfilled,\n        rejected: rejected\n    });\n    return this.handlers.length -1;\n}\n\nexport default InterceptorManager;\n")])])]),n("p",[e._v("åœ¨ Axios.js æ–‡ä»¶ä¸­ï¼Œæ„é€ å‡½æ•°æœ‰ "),n("code",[e._v("interceptors")]),e._v("å±æ€§ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Axios.js\nfunction Axios(config){\n    this.interceptors = {\n        request: new InterceptorManager(),\n        response: new InterceptorManager()\n    }\n}\n")])])]),n("p",[e._v("è¿™æ ·æˆ‘ä»¬åœ¨ Axios.prototype.request æ–¹æ³•ä¸­å¯¹æ‹¦æˆªå™¨æ·»åŠ å¤„ç†ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Axios.js\nAxios.prototype.request = function(config){\n    const adapter = getDefaultAdapter(config);\n    var promise = Promise.resolve(config);\n    var chain = [adapter, undefined];\n    //è¯·æ±‚æ‹¦æˆª\n    this.interceptors.request.handlers.forEach(item=>{\n        chain.unshift(item.rejected);\n        chain.unshift(item.fulfilled);\n        \n    });\n    //å“åº”æ‹¦æˆª\n    this.interceptors.response.handlers.forEach(item=>{\n        chain.push(item.fulfilled);\n        chain.push(item.rejected)\n    });\n    console.dir(chain);\n    while(chain.length){\n        promise = promise.then(chain.shift(), chain.shift());\n    }\n    return promise;\n}\n")])])]),n("p",[e._v("æ‰€ä»¥æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š"),n("code",[e._v("è¯·æ±‚æ‹¦æˆª2 -> è¯·æ±‚æ‹¦æˆª1 -> å‘é€è¯·æ±‚ -> å“åº”æ‹¦æˆª1 -> å“åº”æ‹¦æˆª2")])]),e._v(" "),n("h4",{attrs:{id:"å–æ¶ˆè¯·æ±‚-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å–æ¶ˆè¯·æ±‚-2"}},[e._v("#")]),e._v(" å–æ¶ˆè¯·æ±‚")]),e._v(" "),n("p",[e._v("æ¥åˆ° Axios æœ€ç²¾å½©çš„éƒ¨åˆ†äº†ï¼Œå–æ¶ˆè¯·æ±‚ã€‚æˆ‘ä»¬çŸ¥é“ xhr çš„ "),n("code",[e._v("xhr.abort();")]),e._v(" å‡½æ•°å¯ä»¥å–æ¶ˆè¯·æ±‚ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ‰§è¡Œè¿™ä¸ªå–æ¶ˆè¯·æ±‚çš„æ“ä½œå‘¢ï¼Ÿå¾—æœ‰ä¸€ä¸ªä¿¡å·å‘Šè¯‰ xhr å¯¹è±¡ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå–æ¶ˆæ“ä½œã€‚å–æ¶ˆè¯·æ±‚å°±æ˜¯æœªæ¥æŸä¸ªæ—¶å€™è¦åšçš„äº‹æƒ…ï¼Œä½ èƒ½æƒ³åˆ°ä»€ä¹ˆå‘¢ï¼Ÿå¯¹ï¼Œå°±æ˜¯ Promiseã€‚Promise çš„ "),n("code",[e._v("then")]),e._v("æ–¹æ³•åªæœ‰ Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸º resolved çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œåœ¨ Promise å¯¹è±¡çš„ then æ–¹æ³•ä¸­æ‰§è¡Œå–æ¶ˆè¯·æ±‚çš„æ“ä½œã€‚çœ‹ä»£ç ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//CancelToken.js\n// å–æ¶ˆè¯·æ±‚\nfunction CancelToken(executor){\n    if(typeof executor !== 'function'){\n        throw new TypeError('executor must be a function.')\n    }\n    var resolvePromise;\n    this.promise = new Promise((resolve)=>{\n        resolvePromise = resolve;\n    });\n    executor(resolvePromise)\n}\nCancelToken.source = function(){\n    var cancel;\n    var token = new CancelToken((c)=>{\n        cancel = c;\n    })\n    return {\n        token,\n        cancel\n    };\n}\nexport default CancelToken;\n")])])]),n("p",[e._v("å½“æˆ‘ä»¬æ‰§è¡Œ "),n("code",[e._v("const source = CancelToken.source()")]),e._v("çš„æ—¶å€™ï¼Œsource å¯¹è±¡æœ‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯ token å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ˜¯ cancel å‡½æ•°ã€‚åœ¨ xhr è¯·æ±‚ä¸­ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('//é€‚é…å™¨\n// adapter.js\nfunction xhrAdapter(config){\n    return new Promise((resolve, reject)=>{\n        ...\n        //å–æ¶ˆè¯·æ±‚\n        if(config.cancelToken){\n            // åªæœ‰ resolved çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œå–æ¶ˆæ“ä½œ\n            config.cancelToken.promise.then(function onCanceled(cancel){\n                if(!xhr){\n                    return;\n                }\n                xhr.abort();\n                reject("è¯·æ±‚å·²å–æ¶ˆ");\n                // clean up xhr\n                xhr = null;\n            })\n        }\n    })\n}\n')])])]),n("p",[e._v("CancelToken çš„æ„é€ å‡½æ•°ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å…¶å®æ˜¯ä¸ºäº†å°†èƒ½æ§åˆ¶å†…éƒ¨ Promise çš„ resolve å‡½æ•°æš´éœ²å‡ºå»ï¼Œæš´éœ²ç»™ source çš„ cancel å‡½æ•°ã€‚è¿™æ ·å†…éƒ¨çš„ Promise çŠ¶æ€å°±å¯ä»¥é€šè¿‡ "),n("code",[e._v("source.cancel()")]),e._v(" æ–¹æ³•æ¥æ§åˆ¶å•¦ï¼Œç§’å•Š~ ğŸ‘")]),e._v(" "),n("h3",{attrs:{id:"node-åç«¯æ¥å£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-åç«¯æ¥å£"}},[e._v("#")]),e._v(" node åç«¯æ¥å£")]),e._v(" "),n("p",[e._v("node åç«¯ç®€å•çš„æ¥å£ä»£ç ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const express = require("express");\nconst bodyParser = require(\'body-parser\');\nconst app = express();\nconst router = express.Router();\n//æ–‡ä»¶ä¸‹è½½\nconst fs = require("fs");\n// get è¯·æ±‚\nrouter.get("/getCount", (req, res)=>{\n  setTimeout(()=>{\n    res.json({\n      success: true,\n      code: 200,\n      data: 100\n    })\n  }, 1000)\n})\n\n\n// äºŒè¿›åˆ¶æ–‡ä»¶æµ\nrouter.get(\'/downFile\', (req, res, next) => {\n  var name = \'download.txt\';\n  var path = \'./\' + name;\n  var size = fs.statSync(path).size;\n  var f = fs.createReadStream(path);\n  res.writeHead(200, {\n    \'Content-Type\': \'application/force-download\',\n    \'Content-Disposition\': \'attachment; filename=\' + name,\n    \'Content-Length\': size\n  });\n  f.pipe(res);\n})\n\n// è®¾ç½®è·¨åŸŸè®¿é—®\napp.all("*", function (request, response, next) {\n  // è®¾ç½®è·¨åŸŸçš„åŸŸåï¼Œ* ä»£è¡¨å…è®¸ä»»æ„åŸŸåè·¨åŸŸï¼›http://localhost:8080 è¡¨ç¤ºå‰ç«¯è¯·æ±‚çš„ Origin åœ°å€\n  response.header("Access-Control-Allow-Origin", "http://127.0.0.1:5500");\n  //è®¾ç½®è¯·æ±‚å¤´ header å¯ä»¥åŠ é‚£äº›å±æ€§\n  response.header(\'Access-Control-Allow-Headers\', \'Content-Type, Content-Length, Authorization, Accept, X-Requested-With\');\n  //æš´éœ²ç»™ axios https://blog.csdn.net/w345731923/article/details/114067074\n  response.header("Access-Control-Expose-Headers", "Content-Disposition");\n  // è®¾ç½®è·¨åŸŸå¯ä»¥æºå¸¦ Cookie ä¿¡æ¯\n  response.header(\'Access-Control-Allow-Credentials\', "true");\n  //è®¾ç½®è¯·æ±‚å¤´å“ªäº›æ–¹æ³•æ˜¯åˆæ³•çš„\n  response.header(\n    "Access-Control-Allow-Methods",\n    "PUT,POST,GET,DELETE,OPTIONS"\n  );\n  response.header("Content-Type", "application/json;charset=utf-8");\n  next();\n});\n\n// æ¥å£æ•°æ®è§£æ\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({\n  extended: false\n}))\napp.use(\'/api\', router) // è·¯ç”±æ³¨å†Œ\n\napp.listen(8081, () => {\n  console.log("æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼")\n});\n')])])]),n("h3",{attrs:{id:"git-åœ°å€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git-åœ°å€"}},[e._v("#")]),e._v(" git åœ°å€")]),e._v(" "),n("p",[e._v("å¦‚æœå¤§å®¶èƒ½å¤Ÿè·Ÿç€æºç æ•²ä¸€éï¼Œç›¸ä¿¡ä¸€å®šä¼šæœ‰å¾ˆå¤šæ”¶è·ã€‚")]),e._v(" "),n("p",[e._v("æ‰‹å†™ Axios æ ¸å¿ƒä»£ç  github åœ°å€ï¼šhttps://github.com/YY88Xu/axios-js\nAxios å°è£…ï¼šhttps://github.com/YY88Xu/vue2-component")]),e._v(" "),n("p",[e._v("- EOF -")]),e._v(" "),n("p",[e._v("æ¨èé˜…è¯» ç‚¹å‡»æ ‡é¢˜å¯è·³è½¬")]),e._v(" "),n("p",[e._v("1ã€"),n("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&mid=2651578212&idx=2&sn=3a4bdc17b0c1808f2b5649d84eff93a1&chksm=802508a5b75281b366dca8441c3ab2dc63b93adcd139ec5bb002dc8b10fef80efa49d49d92c2&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue ä¸­ Axios çš„å°è£…å’Œ API æ¥å£çš„ç®¡ç†"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("2ã€"),n("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&mid=2651576212&idx=2&sn=b1c3fac9534f01f4d7c68f7b88800d5c&chksm=80250055b75289430570c54ba104675cbc6e5cf15cd35154a63f1d89b9f7211fb2f88f232e0f&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("Axios å¦‚ä½•å–æ¶ˆé‡å¤è¯·æ±‚ï¼Ÿ"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("3ã€"),n("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&mid=2651576184&idx=2&sn=58e01488d9c22b3de224e88df91ca93e&chksm=802500b9b75289afb55f9a448c6e3d3767fa5d0fba526696dea07e0f9bf167a4cd32791f373d&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("ç»å¾—ä½æ‹·é—®çš„ HTTPS åŸç†è§£æ"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=a.exports}}]);